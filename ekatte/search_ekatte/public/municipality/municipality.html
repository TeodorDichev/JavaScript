<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Index</title>
    <link rel="stylesheet" href="../static/styles/layout.css" />
    <link rel="stylesheet" href="../static/styles/components.css" />
    <link rel="stylesheet" href="../static/styles/table.css" />
    <link rel="stylesheet" href="../static/styles/side-menu.css" />
    <link rel="stylesheet" href="../static/styles/filters.css" />
    <link rel="stylesheet" href="../static/styles/pagination.css" />
    <link rel="stylesheet" href="../static/styles/modal.css" />
    <link rel="stylesheet" href="../static/styles/errors.css" />
  </head>
  <body>
    <div class="layout">
      [[[SIDE_MENU]]]
      <div id="error-container"></div>

      <div class="container">
        <div class="header-row">
          <h1>EKATTE - –æ–±—â–∏–Ω–∏</h1>
        </div>

        <div class="toolbar">
          <div class="search-box">
            <img src="../static/files/lupa.png" alt="search" />
            –¢—ä—Ä—Å–µ–Ω–µ –ø–æ –¥—É–º–∞: <input type="text" id="search-data" />
          </div>

          <div id="export-stats" class="export-stats" style="display: none">
            <small
              >üìä –ü–æ—Å–ª–µ–¥–µ–Ω –µ–∫—Å–ø–æ—Ä—Ç | –í—Ä–µ–º–µ: <strong id="stat-time">-</strong> |
              –ü–∞–º–µ—Ç: <strong id="stat-mem">-</strong> | CPU:
              <strong id="stat-cpu">-</strong></small
            >
          </div>

          <div class="export-actions">
            <button
              id="export-excel-btn"
              class="btn-export excel"
              title="Excel Export"
            >
              Excel
            </button>
            <button
              id="export-csv-btn"
              class="btn-export csv"
              title="CSV Export"
            >
              CSV
            </button>
            <div id="export-loader" class="loader" style="display: none"></div>
          </div>

          <a
            href="../municipality/create-municipality.html"
            id="create-municipality"
            class="action-btn"
            >–î–æ–±–∞–≤–∏ –æ–±—â–∏–Ω–∞</a
          >
        </div>

        <div class="filter-wrapper">
          <div class="filter-controls">
            <select id="filter-type">
              <option value="" disabled selected>–î–æ–±–∞–≤–∏ —Ñ–∏–ª—Ç—ä—Ä...</option>
              <option value="center_ekatte">Ekatte</option>
              <option value="center_name">–ò–º–µ –Ω–∞ —Ü–µ–Ω—Ç—ä—Ä–∞</option>
              <option value="municipality_id">–ö–æ–¥ –Ω–∞ –æ–±—â–∏–Ω–∞</option>
              <option value="municipality_name">–ò–º–µ –Ω–∞ –æ–±—â–∏–Ω–∞</option>
              <option value="region_name">–û–±–ª–∞—Å—Ç</option>
            </select>
            <button id="add-filter-btn" class="action-btn">+ –î–æ–±–∞–≤–∏</button>
          </div>

          <div id="active-filters-container" class="active-filters"></div>
        </div>

        <h2 id="res-header">–†–µ–∑—É–ª—Ç–∞—Ç–∏</h2>
        <div id="result-count"></div>

        <div class="table-wrapper">
          <div class="date-panel">
            <div class="date-range">
              <label>–û—Ç: <input type="date" id="filter-from-date" /></label>
              <label>–î–æ: <input type="date" id="filter-to-date" /></label>
            </div>
          </div>
          <table class="result-table">
            <thead>
              <tr>
                <th class="sortable" data-col="center_ekatte">
                  Ekatte <span class="sort-icon"></span>
                </th>
                <th class="sortable" data-col="center_name">
                  –ò–º–µ –Ω–∞ —Ü–µ–Ω—Ç—ä—Ä–∞ <span class="sort-icon"></span>
                </th>
                <th class="sortable" data-col="municipality_id">
                  –ö–æ–¥ –Ω–∞ –æ–±—â–∏–Ω–∞—Ç–∞ <span class="sort-icon"></span>
                </th>
                <th class="sortable" data-col="municipality_name">
                  –ò–º–µ –Ω–∞ –æ–±—â–∏–Ω–∞—Ç–∞ <span class="sort-icon"></span>
                </th>
                <th class="sortable" data-col="region_name">
                  –û–±–ª–∞—Å—Ç <span class="sort-icon"></span>
                </th>
                <th class="sortable" data-col="municipality_last_change">
                  –ü—Ä–æ–º—è–Ω–∞ <span class="sort-icon"></span>
                </th>
                <th>–û–ø–µ—Ä–∞—Ü–∏–∏</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="pagination-bar">
          <div class="limit-selector">
            <span>–ü–æ–∫–∞–∂–∏:</span>
            <select id="page-limit">
              <option value="10">10</option>
              <option value="20" selected>20</option>
              <option value="50">50</option>
              <option value="100">100</option>
            </select>
          </div>

          <div id="pagination-bottom" class="pagination-buttons"></div>
        </div>
      </div>

      <div class="modal-overlay" id="infoModal">
        <div class="modal-content">
          <h2 id="modalTitle"></h2>

          <div class="modal-section">
            <h3>–¶–µ–Ω—Ç—ä—Ä</h3>
            <p><strong>EKATTE:</strong> <span id="m-ekatte"></span></p>
            <p><strong>–ò–º–µ:</strong> <span id="m-center-name"></span></p>
          </div>

          <div class="modal-section">
            <h3>–û–±—â–∏–Ω–∞</h3>
            <p><strong>–ò–º–µ:</strong> <span id="m-name"></span></p>
            <p><strong>–ö–æ–¥:</strong> <span id="m-id"></span></p>
            <p><strong>–û–±–ª–∞—Å—Ç:</strong> <span id="m-region"></span></p>
            <p>
              <strong>–ü–æ—Å–ª–µ–¥–Ω–∞ –ø—Ä–æ–º—è–Ω–∞:</strong>
              <span id="m-last-change"></span>
            </p>
          </div>

          <div class="modal-section">
            <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <p>
              <strong>–ë—Ä–æ–π —Å–µ–ª–∏—â–∞:</strong>
              <span id="m-settlements-count"></span>
            </p>
            <p>
              <strong>–ë—Ä–æ–π –∫–º–µ—Ç—Å—Ç–≤–∞:</strong>
              <span id="m-mayoralities-count"></span>
            </p>
          </div>
        </div>
      </div>
    </div>
    <script src="../static/scripts/components/side-menu.js"></script>
    <script
      type="module"
      src="../static/scripts/pages/municipality/home-municipality.js"
    ></script>
  </body>
</html>
