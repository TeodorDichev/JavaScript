# EKATTE Project

–°–∏—Å—Ç–µ–º–∞ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ —Ç—ä—Ä—Å–µ–Ω–µ –≤ –æ—Ñ–∏—Ü–∏–∞–ª–Ω–∏—è –∫–ª–∞—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ-—Ç–µ—Ä–∏—Ç–æ—Ä–∏–∞–ª–Ω–∏—Ç–µ –∏ —Ç–µ—Ä–∏—Ç–æ—Ä–∏–∞–ª–Ω–∏—Ç–µ –µ–¥–∏–Ω–∏—Ü–∏ (–ï–ö–ê–¢–¢–ï) –Ω–∞ –ë—ä–ª–≥–∞—Ä–∏—è.

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω–∏ & –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°—Ö–µ–º–∞—Ç–∞ –µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–∞–Ω–∞ –≤ **—Ç—Ä–µ—Ç–∞ –Ω–æ—Ä–º–∞–ª–Ω–∞ —Ñ–æ—Ä–º–∞ (3NF)**, –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞—â–∞ –ª–∏–ø—Å–∞ –Ω–∞ –∏–∑–ª–∏—à—ä–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ç–µ—Ç –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ. –í—Å–∏—á–∫–∏ SQL —Ä–µ—Å—É—Ä—Å–∏ —Å–∞ –æ—Ä–≥–∞–Ω–∏–∑–∏—Ä–∞–Ω–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `pg_sql_scripts/`.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- **ER –î–∏–Ω–∞–º–∏–∫–∞:** –ü—ä–ª–Ω–∞—Ç–∞ –ª–æ–≥–∏—á–µ—Å–∫–∞ —Å—Ö–µ–º–∞ –Ω–∞ –±–∞–∑–∞—Ç–∞ –¥–∞–Ω–Ω–∏ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –≤–∏–¥—è–Ω–∞ —Ç—É–∫:
  ![Entity Relationship Diagram](./pg_sql_scripts/erd.png)
- **SQL –°–∫—Ä–∏–ø—Ç–æ–≤–µ:** –í –ø–∞–ø–∫–∞ `pg_sql_scripts/` —â–µ –æ—Ç–∫—Ä–∏–µ—Ç–µ:
  - –°–∫—Ä–∏–ø—Ç–æ–≤–µ –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∏ (`DDL`).
  - –î–µ—Ñ–∏–Ω–∏—Ü–∏–∏ –Ω–∞ **Views**, –∫–æ–∏—Ç–æ –∫–∞–ø—Å—É–ª–∏—Ä–∞—Ç —Å–ª–æ–∂–Ω–∏—Ç–µ `JOIN` –æ–ø–µ—Ä–∞—Ü–∏–∏.
  - –ò–Ω–¥–µ–∫—Å–∏ –≤—ä—Ä—Ö—É –≤—ä–Ω—à–Ω–∏ –∫–ª—é—á–æ–≤–µ –∏ –∫–æ–ª–æ–Ω–∏ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ.
- **–ò–Ω—Ç–µ–≥—Ä–∏—Ç–µ—Ç:** –ò–∑–ø–æ–ª–∑–≤–∞—Ç —Å–µ —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–∞–Ω–∏ –¥–∞–Ω–Ω–∏ –∏ –∫–æ–Ω—Å—Ç—Ä–µ–π–Ω—Ç–∏, —Å—ä–æ–±—Ä–∞–∑–µ–Ω–∏ —Å [–Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞—Ç–∞ –Ω–∞ –ù–°–ò](https://www.nsi.bg/nrnm/pages/nomenklatura).

## üì• –ò–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏

–ü—Ä–æ—Ü–µ—Å—ä—Ç –µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω —á—Ä–µ–∑ Node.js CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–∞–º–∏—Ä–∞—â —Å–µ –≤ –ø–∞–ø–∫–∞ `import`.

- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:** –í—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∏ —Å–µ –∏–∑–≤—ä—Ä—à–≤–∞—Ç –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ü—Ä–∏ –≥—Ä–µ—à–∫–∞ —Å–µ –∑–∞–¥–µ–π—Å—Ç–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω **rollback**.
- **Batch Processing:** –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ `batchInsert` —Å –¥–∏–Ω–∞–º–∏—á–Ω–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä–∞–Ω–∏ –∑–∞—è–≤–∫–∏ –∑–∞ –≤–∏—Å–æ–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–Ω–æ—Å—Ç –ø—Ä–∏ –≥–æ–ª–µ–º–∏ –æ–±–µ–º–∏ –æ—Ç Excel/JSON —Ñ–∞–π–ª–æ–≤–µ.
- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å—Ç–≤–∞–Ω–µ –Ω–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–∏ ID-—Ç–∞ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–¥–æ–≤–µ—Ç–µ –Ω–∞ –∫–º–µ—Ç—Å—Ç–≤–∞—Ç–∞ —á—Ä–µ–∑ `normalizeMayoralityId`.

## üîç search_ekatte (API & Frontend)

–ü—Ä–æ–µ–∫—Ç—ä—Ç –µ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –¥–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∏ —á–∞—Å—Ç–∏ –∑–∞ –ø—ä–ª–Ω–∞ –∏–∑–æ–ª–∞—Ü–∏—è.

### –ë–µ–∫–µ–Ω–¥ (Port 3000)
- **Custom Router:** –ò–∑–≥—Ä–∞–¥–µ–Ω –±–µ–∑ –≤—ä–Ω—à–Ω–∏ —Ñ—Ä–µ–π–º—É—ä—Ä–∫–æ–≤–µ, –∏–∑–ø–æ–ª–∑–≤–∞—â —á–∏—Å—Ç Node.js `http` –º–æ–¥—É–ª.
- **Pagination:** –†–µ–∞–ª–∏–∑–∏—Ä–∞–Ω–∞ –Ω–∞ –Ω–∏–≤–æ –±–∞–∑–∞ –¥–∞–Ω–Ω–∏ —á—Ä–µ–∑ `LIMIT` –∏ `OFFSET`, –∫–æ–µ—Ç–æ –ø–æ–∑–≤–æ–ª—è–≤–∞ –±—ä—Ä–∑–∞ —Ä–∞–±–æ—Ç–∞ –¥–æ—Ä–∏ –ø—Ä–∏ —Ö–∏–ª—è–¥–∏ –∑–∞–ø–∏—Å–∏.
- **CORS:** –†—ä—á–Ω–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω –∑–∞ —Å–∏–≥—É—Ä–Ω–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å—ä—Ä–≤—ä—Ä–∞.
- **Exports:** –ü–æ–¥–¥—Ä—ä–∂–∫–∞ –Ω–∞ –µ–∫—Å–ø–æ—Ä—Ç –∫—ä–º **CSV** –∏ **Excel** –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –æ—Ç —Ç—ä—Ä—Å–µ–Ω–µ—Ç–æ.

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (Port 8000)
- **Debounced Search:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–∏ AJAX –∑–∞—è–≤–∫–∏, –∫–æ–∏—Ç–æ —Å–µ –∏–∑–ø—Ä–∞—â–∞—Ç —Å–∞–º–æ —Å–ª–µ–¥ –∫–∞—Ç–æ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—è—Ç —Å–ø—Ä–µ –¥–∞ –ø–∏—à–µ (300ms delay).
- **Dynamic UI:** –†–µ–Ω–¥–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ –∏ –∞–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –±—Ä–æ—è –Ω–∞–º–µ—Ä–µ–Ω–∏ –∑–∞–ø–∏—Å–∏ –±–µ–∑ –ø—Ä–µ–∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ–Ω —Å—Ç–µ–∫ (Dependencies)

–ü—Ä–æ–µ–∫—Ç—ä—Ç –∏–∑–ø–æ–ª–∑–≤–∞ –ø–æ–¥–±—Ä–∞–Ω –Ω–∞–±–æ—Ä –æ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

### ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
* **`pg`**: PostgreSQL –∫–ª–∏–µ–Ω—Ç –∑–∞ Node.js. –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≤—Ä—ä–∑–∫–∏—Ç–µ (pooling), –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ SQL –∑–∞—è–≤–∫–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
* **`dotenv`**: –ó–∞—Ä–µ–∂–¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∏ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ –æ—Ç `.env` —Ñ–∞–π–ª. –ì–∞—Ä–∞–Ω—Ç–∏—Ä–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª–Ω–∏ –¥–∞–Ω–Ω–∏ –∫–∞—Ç–æ –ø–∞—Ä–æ–ª–∏ –∑–∞ –ë–î.
* **`mime-types`**: –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –∑–∞ –ø—Ä–∞–≤–∏–ª–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–Ω–µ –Ω–∞ —Ñ–∞–π–ª–æ–≤–∏ —Ñ–æ—Ä–º–∞—Ç–∏ –ø—Ä–∏ –¥–∏–Ω–∞–º–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏ –æ—Ç —Å—ä—Ä–≤—ä—Ä–∞ (CSV, Excel).

### üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏ –∏ –∞—Ä—Ö–∏–≤–∏—Ä–∞–Ω–µ
* **`exceljs`**: –ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ –∑–∞ —á–µ—Ç–µ–Ω–µ –Ω–∞ –≤—Ö–æ–¥–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏ –æ—Ç –ù–°–ò –∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ –¥–µ—Ç–∞–π–ª–Ω–∏ Excel —Ä–µ–ø–æ—Ä—Ç–∏ –ø—Ä–∏ –µ–∫—Å–ø–æ—Ä—Ç.
* **`jszip`**: –ü–æ–∑–≤–æ–ª—è–≤–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∫–æ–º–ø—Ä–µ—Å–∏—Ä–∞–Ω–∏ –∞—Ä—Ö–∏–≤–∏ –≤ —Ä–µ–∞–ª–Ω–æ –≤—Ä–µ–º–µ (–Ω–∞–ø—Ä. –ø—Ä–∏ —Å–≤–∞–ª—è–Ω–µ –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏ —Ä–µ—Å—É—Ä—Å–∏).

### üß™ –¢–µ—Å—Ç–≤–∞–Ω–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∞ –∫–æ–¥–∞
* **`vitest`**: –ú–æ–¥–µ—Ä–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞ —Å—Ä–µ–¥–∞, –∏–∑–ø–æ–ª–∑–≤–∞–Ω–∞ –∑–∞ Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ç–µ—Å—Ç–æ–≤–µ.
* **`@vitest/coverage-v8`**: –ì–µ–Ω–µ—Ä–∏—Ä–∞ –¥–µ—Ç–∞–π–ª–Ω–∏ —Ä–µ–ø–æ—Ä—Ç–∏ –∑–∞ —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä–∏–≤ (Code Coverage), –∑–∞ –¥–∞ —Å–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞ –Ω–∞–¥–µ–∂–¥–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ –ª–æ–≥–∏–∫–∞—Ç–∞.
* **`jsdom`**: –°–∏–º—É–ª–∏—Ä–∞ –±—Ä–∞—É–∑—ä—Ä–Ω–∞ —Å—Ä–µ–¥–∞ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ DOM –º–∞–Ω–∏–ø—É–ª–∞—Ü–∏–∏—Ç–µ –≤—ä–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –±–µ–∑ –Ω—É–∂–¥–∞ –æ—Ç —Ä–µ–∞–ª–µ–Ω –±—Ä–∞—É–∑—ä—Ä.

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
* **`jsdoc`**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–∏—Ä–µ–∫—Ç–Ω–æ –æ—Ç –∫–æ–º–µ–Ω—Ç–∞—Ä–∏—Ç–µ –≤ –∫–æ–¥–∞.
* **`docdash`**: –¢–µ–º–∞ –∑–∞ JSDoc, –∫–æ—è—Ç–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—è –π–µ—Ä–∞—Ä—Ö–∏—á–Ω–æ –º–µ–Ω—é –∏ —Ç—ä—Ä—Å–∞—á–∫–∞ –∑–∞ –ø–æ-–ª–µ—Å–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞.

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è & –¢–µ—Å—Ç–æ–≤–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–ü—Ä–æ–µ–∫—Ç—ä—Ç –∏–∑–ø–æ–ª–∑–≤–∞ **JSDoc** —Å —à–∞–±–ª–æ–Ω–∞ **Docdash**. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞ –∑–∞ `search_ekatte/src` –µ –Ω–∞–ª–∏—á–Ω–∞ –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ —Ç–µ–∫—É—â–∏—è –±—Ä–∞–Ω—á.
- [Full API Reference](./docs/index.html) *(–û—Ç–≤–æ—Ä–µ—Ç–µ –ª–æ–∫–∞–ª–Ω–æ –ø—Ä–µ–∑ –±—Ä–∞—É–∑—ä—Ä–∞)*

### –¢–µ—Å—Ç–≤–∞–Ω–µ
–ò–∑–ø–æ–ª–∑–≤–∞ —Å–µ **Vitest** –∑–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–∞–Ω–µ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞ –∫–æ–¥–∞:
- **Unit Tests:** –ü–æ–∫—Ä–∏–≤–∞—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏—Ç–µ –∏ –ø–æ–º–æ—â–Ω–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏.
- **Controller Tests:** –¢–µ—Å—Ç–≤–∞—Ç –º–∞–ø–∏–Ω–≥–∞ –Ω–∞ –∑–∞—è–≤–∫–∏—Ç–µ –∏ –ª–æ–≥–∏–∫–∞—Ç–∞ –Ω–∞ –æ—Ç–≥–æ–≤–æ—Ä–∏—Ç–µ.

#### –ò–∑–ø—ä–ª–Ω–µ–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–µ—Ç–µ:
```bash
# –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ —Ç–µ—Å—Ç–æ–≤–µ
npm test

# –°—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–µ –∏ –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ Coverage —Ä–µ–ø–æ—Ä—Ç
npm run coverage
